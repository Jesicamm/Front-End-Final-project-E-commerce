{"ast":null,"code":"var _jsxFileName = \"/home/jessica/PROYECTOS GEEKSHUBS/PROYECTOS/proyecto final front/Front-End-Final-project-E-commerce/finalproject/src/views/Sesion/Sesion.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport checkError from '../../My-tools/My-tools';\nimport { connect } from 'react-redux';\nimport { LOGIN } from '../../redux/types/userTypes';\nimport './Sesion.css';\nimport Header from \"../../components/Header/Header\";\nimport SesionShop from '../../Img/sesion.jpg';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Sesion = props => {\n  _s();\n\n  const [credentials, setCredentials] = useState({\n    email: '',\n    password: ''\n  });\n  const [showRegister, setShowRegister] = useState(true);\n\n  const changeForm = () => setShowRegister(!showRegister);\n\n  const handler = e => {\n    setCredentials({ ...credentials,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const [registerMessage, setRegisterMessage] = useState('');\n  const [loginMessage, setLoginMessage] = useState('');\n\n  const sendDataLogin = async () => {\n    setLoginMessage('');\n    /* let notValidated = checkError(credentials)\n    setLoginMessage(notValidated);\n     if (notValidated) {\n        return;\n    }; */\n\n    let credentialsData = {\n      email: credentials.email,\n      password: credentials.password\n    };\n    let response = await axios.post('http://localhost:3002/users/login', credentialsData);\n\n    if (!response) {\n      setLoginMessage('Sus credenciales son erroneos, comprueba su email o contraseña');\n      window.confirm('Sus credenciales son erroneos, comprueba su email o contraseña');\n    }\n\n    ;\n    let guardado = props.dispatch({\n      type: LOGIN,\n      payload: response.data.jwt\n    });\n\n    if (guardado.payload.user.role === 'basic') {\n      history.push('/profile');\n    }\n\n    if (guardado.payload.user.role === 'admin') {\n      history.push('/admin');\n    }\n  };\n\n  let history = useHistory();\n  const [user, setUser] = useState({\n    name: \"\",\n    surname: \"\",\n    email: \"\",\n    password: \"\",\n    phone: \"\",\n    birthday: \"\",\n    address: \"\",\n    country: \"\",\n    city: \"\",\n    postal: \"\"\n  });\n\n  const handleState = e => {\n    setUser({ ...user,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const sendDataRegister = async () => {\n    // Check for erros---------------------//\n    setRegisterMessage('');\n    let notValidated = checkError(user);\n    setRegisterMessage(notValidated);\n\n    if (notValidated) {\n      return;\n    }\n\n    let userData = {\n      name: user.name,\n      surname: user.surname,\n      email: user.email,\n      password: user.password,\n      address: user.address,\n      phone: user.phone,\n      country: user.country,\n      city: user.city,\n      postal: user.postal\n    };\n    let endpointUser = 'http://localhost:3002/users';\n    let response = setTimeout(async () => {\n      await axios.post(endpointUser, userData);\n    }, 1000);\n\n    if (response) {\n      alert('Usuario Registrado Con Exito');\n    } else {\n      alert('Lo siento , no se pudo completar el registro, vuelve a intentarlo mas tarde');\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"content-sesion\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sesion-img\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sesion-img-text\",\n        children: /*#__PURE__*/_jsxDEV(\"h5\", {\n          children: \"Est\\xE1s a punto de disfrutar de todas nuestras ofertas!!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 18\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sesion-img-container\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"image-sesion\",\n          src: SesionShop,\n          alt: \"whatsapp\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content-sesion-register-login\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sesion-modal-btn-content\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"sesion-modal-btn\",\n          onClick: changeForm,\n          children: showRegister ? \"Login\" : \"Registro\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 13\n      }, this), showRegister ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-register\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"register-title\",\n          children: \"CREAR UNA CUENTA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"register\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"register-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"form-label-register\",\n              children: \"Nombre\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"name\",\n              className: \"form-input-register\",\n              onChange: handleState\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"form-label-register\",\n              children: \"Apellidos\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"surname\",\n              className: \"form-input-register\",\n              onChange: handleState\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"phone\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"form-label-register\",\n                children: \"Tel\\xE9fono de contacto\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                name: \"phone\",\n                className: \"form-input-register\",\n                onChange: handleState\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 157,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"birthday\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"form-label-register\",\n                children: \"Fecha de nacimiento\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                name: \"birth\",\n                type: \"date\",\n                className: \"form-input-register\",\n                onChange: handleState\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"form-label-register\",\n              children: \"Direcc\\xEDon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"address\",\n              className: \"form-input-register\",\n              onChange: handleState\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"register-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"city-country\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"form-label-register\",\n                children: \"Pais\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                name: \"country\",\n                className: \"form-input-register\",\n                onChange: handleState\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"city-city\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"form-label-register\",\n                children: \"Ciudad\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                name: \"city\",\n                className: \"form-input-register\",\n                onChange: handleState\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"city-cp\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"form-label-cp\",\n                children: \"CP\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                name: \"postal\",\n                className: \"form-input-register\",\n                onChange: handleState\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"form-label-register\",\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"email\",\n              className: \"form-input-register\",\n              onChange: handleState\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-password-register\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"form-label-register\",\n                children: \"Contrase\\xF1a\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 190,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                name: \"password\",\n                className: \"form-input-register\",\n                onChange: handleState\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"button-div\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"register-message\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: registerMessage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 56\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 22\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: sendDataRegister,\n            className: \"sesion-press-btn\",\n            children: \"Registrarse\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"login-title\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"form-label-login-email\",\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"email\",\n            className: \"form-label-login-email\",\n            onChange: handler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"form-label-password-login\",\n            children: \"Contrase\\xF1a\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            name: \"password\",\n            className: \"form-input-password\",\n            onChange: handler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"login-message\",\n            children: loginMessage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: sendDataLogin,\n          className: \"sesion-press-btn\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 126,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Sesion, \"VY8SGzADn/18wIzBsoG9wXT7OMo=\", false, function () {\n  return [useHistory];\n});\n\n_c = Sesion;\nexport default connect()(Sesion);\n\nvar _c;\n\n$RefreshReg$(_c, \"Sesion\");","map":{"version":3,"sources":["/home/jessica/PROYECTOS GEEKSHUBS/PROYECTOS/proyecto final front/Front-End-Final-project-E-commerce/finalproject/src/views/Sesion/Sesion.jsx"],"names":["React","useState","useHistory","axios","checkError","connect","LOGIN","Header","SesionShop","Sesion","props","credentials","setCredentials","email","password","showRegister","setShowRegister","changeForm","handler","e","target","name","value","registerMessage","setRegisterMessage","loginMessage","setLoginMessage","sendDataLogin","credentialsData","response","post","window","confirm","guardado","dispatch","type","payload","data","jwt","user","role","history","push","setUser","surname","phone","birthday","address","country","city","postal","handleState","sendDataRegister","notValidated","userData","endpointUser","setTimeout","alert"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport checkError from '../../My-tools/My-tools';\nimport { connect } from 'react-redux';\nimport { LOGIN } from '../../redux/types/userTypes';\nimport './Sesion.css';\nimport Header from \"../../components/Header/Header\";\nimport SesionShop from '../../Img/sesion.jpg'\n\n\nconst Sesion = (props) => {\n\n    const [credentials, setCredentials] = useState({ email: '', password: '' });\n\n    const [showRegister, setShowRegister] = useState(true)\n\n    const changeForm= () => setShowRegister(!showRegister)\n    const handler = (e) => {\n        setCredentials({ ...credentials, [e.target.name]: e.target.value });\n    };\n\n    const [registerMessage, setRegisterMessage] = useState('');\n    const [loginMessage, setLoginMessage] = useState('');\n\n\n\n    const sendDataLogin = async () => {\n\n        setLoginMessage('');\n\n        /* let notValidated = checkError(credentials)\n        setLoginMessage(notValidated);\n\n        if (notValidated) {\n            return;\n        }; */\n\n        let credentialsData = {\n            email: credentials.email,\n            password: credentials.password,\n\n        };\n\n        let response = await axios.post('http://localhost:3002/users/login', credentialsData);\n        \n        if (!response) {\n            setLoginMessage('Sus credenciales son erroneos, comprueba su email o contraseña');\n            window.confirm('Sus credenciales son erroneos, comprueba su email o contraseña');\n        };\n        \n        let guardado = props.dispatch({ type: LOGIN, payload: response.data.jwt });\n        \n\n        if (guardado.payload.user.role === 'basic') {\n            history.push('/profile')\n        }\n\n        if (guardado.payload.user.role === 'admin') {\n            history.push('/admin')\n        }\n\n        \n    }\n\n\n    let history = useHistory();\n    const [user, setUser] = useState({\n        name: \"\",\n        surname: \"\",\n        email: \"\",\n        password: \"\",\n        phone: \"\",\n        birthday: \"\",\n        address: \"\",\n        country: \"\",\n        city: \"\",\n        postal: \"\",\n        \n    });\n\n\n\n    const handleState = (e) => {\n        setUser({ ...user, [e.target.name]: e.target.value });\n    };\n\n\n    const sendDataRegister = async () => {\n\n        // Check for erros---------------------//\n        setRegisterMessage('');\n\n        let notValidated = checkError(user)\n        setRegisterMessage(notValidated);\n\n        if (notValidated) {\n            return;\n        }\n\n        let userData = {\n            name: user.name,\n            surname: user.surname,\n            email: user.email,\n            password: user.password,\n            address: user.address,\n            phone: user.phone,\n            country: user.country,\n            city: user.city,\n            postal: user.postal\n        };\n\n        let endpointUser = 'http://localhost:3002/users';\n\n        let response = setTimeout(async () => {\n            await axios.post(endpointUser, userData);\n        }, 1000)\n        if (response) {\n            alert('Usuario Registrado Con Exito');\n        } else {\n            alert('Lo siento , no se pudo completar el registro, vuelve a intentarlo mas tarde');\n        }\n    };\n\n    return (\n        <div className=\"content-sesion\">\n          <Header/>\n          <div className='sesion-img'>\n              <div className='sesion-img-text'>\n                 <h5>Estás a punto de disfrutar de todas nuestras ofertas!!</h5>\n              </div>\n              <div className='sesion-img-container'> \n                <img className=\"image-sesion\" src={SesionShop} alt=\"whatsapp\"/>\n              </div>\n          </div>\n          <div className='content-sesion-register-login'>\n            <div className='sesion-modal-btn-content'>\n                <button className='sesion-modal-btn' onClick={changeForm}>{showRegister ? \"Login\" : \"Registro\"}</button>\n            </div>\n            {showRegister ?\n            \n            <div className=\"container-register\">\n                \n                <h3 className=\"register-title\">CREAR UNA CUENTA</h3>\n                <div className='register'>\n\n                    <div className='register-row'>\n                        \n                            <p className='form-label-register'>Nombre</p>\n                            <input name='name' className=\"form-input-register\" onChange={handleState}></input>\n\n                            <p className='form-label-register'>Apellidos</p>\n                            <input name='surname' className=\"form-input-register\" onChange={handleState}></input>\n\n                            <div className=\"phone\">\n                                <p className='form-label-register'>Teléfono de contacto</p>\n                                <input name=\"phone\" className=\"form-input-register\" onChange={handleState}></input>\n                            </div>\n\n                            <div className=\"birthday\">\n                                <p className='form-label-register'>Fecha de nacimiento</p>\n                                <input name=\"birth\" type='date' className=\"form-input-register\" onChange={handleState}></input>\n                            </div>\n\n                            <p className='form-label-register'>Direccíon</p>\n                            <input name='address' className=\"form-input-register\" onChange={handleState}></input>\n                        \n\n                        \n                    </div>\n                    \n                    <div className='register-row'>\n                        <div className=\"city-country\">\n                                <p className='form-label-register'>Pais</p>\n                                <input name=\"country\" className=\"form-input-register\" onChange={handleState}></input>\n                        </div>\n                        <div className=\"city-city\">\n                            <p className='form-label-register'>Ciudad</p>\n                            <input name=\"city\" className=\"form-input-register\" onChange={handleState}></input>\n                        </div>\n                        <div className=\"city-cp\">\n                            <p className='form-label-cp'>CP</p>\n                            <input name=\"postal\" className=\"form-input-register\" onChange={handleState}></input>\n\n                        </div>\n\n                        <p className='form-label-register'>Email</p>\n                        <input name='email' className=\"form-input-register\" onChange={handleState}></input>\n                        <div className=\"form-password-register\">\n                            <p className='form-label-register' >Contraseña</p>\n                            <input type='password' name='password' className=\"form-input-register\" onChange={handleState}></input>\n                        </div>\n                    </div>\n                        \n                    </div>\n                <div className=\"button-div\">\n                     <div className='register-message'><p>{registerMessage}</p></div>\n                    <button onClick={sendDataRegister} className=\"sesion-press-btn\">\n                        Registrarse\n                    </button>\n                </div>\n            </div>\n            :\n            <div className='login'>\n                <h3 className=\"login-title\">Login</h3>\n                <div className=\"login-container\">\n                <p className='form-label-login-email'>Email</p>\n                <input name='email' className=\"form-label-login-email\" onChange={handler}></input>\n                    <p className='form-label-password-login' >Contraseña</p>\n                <input type='password' name='password' className=\"form-input-password\" onChange={handler}></input>\n                <div className='login-message'>{loginMessage}</div>\n                </div>\n                <button onClick={sendDataLogin} className=\"sesion-press-btn\">\n                    Login\n                </button>\n            \n            </div>\n        }\n        </div>\n        </div>\n        \n    )\n}\n\n\n\nexport default connect()(Sesion);"]},"metadata":{},"sourceType":"module"}