{"ast":null,"code":"var _jsxFileName = \"/home/jessica/PROYECTOS GEEKSHUBS/PROYECTOS/proyecto final front/Front-End-Final-project-E-commerce/finalproject/src/views/Sesion/Sesion.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport checkError from '../../My-tools/My-tools';\nimport { connect } from 'react-redux';\nimport { LOGIN } from '../../redux/types/userTypes';\nimport './Sesion.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Sesion = props => {\n  _s();\n\n  const [credentials, setCredentials] = useState({\n    email: '',\n    password: ''\n  });\n\n  const handler = e => {\n    setCredentials({ ...credentials,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const [registerMessage, setRegisterMessage] = useState('');\n  const [loginMessage, setLoginMessage] = useState('');\n\n  const sendDataLogin = async () => {\n    setLoginMessage('');\n    let notValidated = checkError(credentials);\n    setLoginMessage(notValidated);\n\n    if (notValidated) {\n      return;\n    }\n\n    ;\n    let credentialsData = {\n      email: credentials.email,\n      password: credentials.password\n    };\n    let response = await axios.post('http://localhost:3002/users/login', credentialsData);\n    let guardado = props.dispatch({\n      type: LOGIN,\n      payload: response.data.jwt\n    });\n    console.log(guardado);\n\n    if (guardado.payload.user.role === 'basic') {\n      history.push('/profile');\n    }\n\n    if (guardado.payload.user.role === 'admin') {\n      history.push('/admin');\n    }\n    /*  if (response.status === 200) {\n        setTimeout(() => {\n            history.push('/profile')\n        }, 1000);\n    } else {\n        setLoginMessage('Sus credenciales son erroneos, comprueba su email o contraseña');\n        window.confirm('Sus credenciales son erroneos, comprueba su email o contraseña');\n    }  */\n\n  };\n\n  let history = useHistory();\n  const [user, setUser] = useState({\n    name: \"\",\n    surname: \"\",\n    email: \"\",\n    password: \"\",\n    phone: \"\",\n    birthday: \"\",\n    address: \"\",\n    country: \"\",\n    city: \"\",\n    postal: \"\",\n    role: \"\"\n  });\n\n  const handleState = e => {\n    setUser({ ...user,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const sendDataRegister = async () => {\n    // Check for erros---------------------//\n    setRegisterMessage('');\n    let notValidated = checkError(user);\n    setRegisterMessage(notValidated);\n\n    if (notValidated) {\n      return;\n    }\n\n    let userData = {\n      name: user.name,\n      surname: user.surname,\n      email: user.email,\n      password: user.password,\n      address: user.address,\n      phone: user.phone,\n      country: user.country,\n      city: user.city,\n      postal: user.postal,\n      role: user.role\n    };\n    let endpointUser = 'http://localhost:3002/users';\n    let response = setTimeout(async () => {\n      await axios.post(endpointUser, userData);\n    }, 1000);\n\n    if (response) {\n      alert('Usuario Registrado Con Exito');\n    } else {\n      alert('Lo siento , no se pudo completar el registro, vuelve a intentarlo mas tarde');\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"content-sesion\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"register\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Registro\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"register-first\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-content-inputs-register\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"form-label-name\",\n            children: \"Nombre\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"name\",\n            className: \"form-input-register-name\",\n            onChange: handleState\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"form-label-surname\",\n            children: \"Apellidos\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"surname\",\n            className: \"form-input-surname\",\n            onChange: handleState\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"phone\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"form-label-phone\",\n              children: \"Tel\\xE9fono de contacto\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 22\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"phone\",\n              className: \"form-input-phone\",\n              onChange: handleState\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"form-label-adress\",\n            children: \"Direcc\\xEDon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"address\",\n            className: \"form-input-adress\",\n            onChange: handleState\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"city-country\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"form-label-country\",\n            children: \"Pais\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"country\",\n            className: \"form-input-country\",\n            onChange: handleState\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 14\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"register-second\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"city-city\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"form-label-city\",\n            children: \"Ciudad\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"city\",\n            className: \"form-input-city\",\n            onChange: handleState\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"city-cp\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"form-label-cp\",\n            children: \"CP\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"postal\",\n            className: \"form-input-cp\",\n            onChange: handleState\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"form-label-email\",\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"email\",\n          className: \"form-input-email\",\n          onChange: handleState\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-password-register\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"form-label-password\",\n            children: \"Contrase\\xF1a\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            name: \"password\",\n            className: \"form-input-password\",\n            onChange: handleState\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message\",\n          children: registerMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: sendDataRegister,\n          className: \"form-button form-button-register\",\n          children: \"Registrarse\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"form-label-login-email\",\n        children: \"Email\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"email\",\n        className: \"form-label-login-email\",\n        onChange: handler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-password-login\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"form-label-password-login\",\n          children: \"Contrase\\xF1a\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        className: \"form-input-password\",\n        onChange: handler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message\",\n        children: loginMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: sendDataLogin,\n        className: \"form-button-login\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 124,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Sesion, \"uAaeJgpLCYthCnptp3eYztR8JcA=\", false, function () {\n  return [useHistory];\n});\n\n_c = Sesion;\nexport default connect()(Sesion);\n\nvar _c;\n\n$RefreshReg$(_c, \"Sesion\");","map":{"version":3,"sources":["/home/jessica/PROYECTOS GEEKSHUBS/PROYECTOS/proyecto final front/Front-End-Final-project-E-commerce/finalproject/src/views/Sesion/Sesion.jsx"],"names":["React","useState","useHistory","axios","checkError","connect","LOGIN","Sesion","props","credentials","setCredentials","email","password","handler","e","target","name","value","registerMessage","setRegisterMessage","loginMessage","setLoginMessage","sendDataLogin","notValidated","credentialsData","response","post","guardado","dispatch","type","payload","data","jwt","console","log","user","role","history","push","setUser","surname","phone","birthday","address","country","city","postal","handleState","sendDataRegister","userData","endpointUser","setTimeout","alert"],"mappings":"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","sourcesContent":["\nimport React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport checkError from '../../My-tools/My-tools';\nimport { connect } from 'react-redux';\nimport { LOGIN } from '../../redux/types/userTypes';\nimport './Sesion.css';\n\n\nconst Sesion = (props) => {\n        \n        const [credentials, setCredentials] = useState({ email: '', password: '' });\n        \n    \n        const handler = (e) => {\n            setCredentials({ ...credentials, [e.target.name]: e.target.value });\n        };\n        \n        const [registerMessage, setRegisterMessage] = useState('');\n        const [loginMessage, setLoginMessage] = useState('');\n\n        const sendDataLogin = async () => {\n    \n            setLoginMessage('');\n    \n            let notValidated = checkError(credentials)\n            setLoginMessage(notValidated);\n    \n            if (notValidated) {\n                return;\n            };\n    \n            let credentialsData = {\n                email: credentials.email,\n                password: credentials.password,\n                \n            };\n    \n            let response = await axios.post('http://localhost:3002/users/login', credentialsData);\n           let guardado =  props.dispatch({ type: LOGIN, payload: response.data.jwt });\n           console.log(guardado)\n           \n            \n             if (guardado.payload.user.role === 'basic'){\n                history.push('/profile')\n            }\n\n            if (guardado.payload.user.role === 'admin'){\n                history.push('/admin')\n            } \n\n            /*  if (response.status === 200) {\n                setTimeout(() => {\n                    history.push('/profile')\n                }, 1000);\n            } else {\n                setLoginMessage('Sus credenciales son erroneos, comprueba su email o contraseña');\n                window.confirm('Sus credenciales son erroneos, comprueba su email o contraseña');\n            }  */\n        } \n    \n\n    let history = useHistory();\n    const [user, setUser] = useState({\n        name: \"\",\n        surname: \"\",\n        email: \"\",\n        password: \"\",\n        phone: \"\",\n        birthday: \"\",\n        address: \"\",\n        country: \"\",\n        city: \"\",\n        postal: \"\",\n        role: \"\"\n    });\n\n    \n\n    const handleState = (e) => {\n        setUser({ ...user, [e.target.name]: e.target.value });\n    };\n\n    \n    const sendDataRegister = async () => {\n\n        // Check for erros---------------------//\n        setRegisterMessage('');\n\n        let notValidated = checkError(user)\n        setRegisterMessage(notValidated);\n\n        if (notValidated) {\n            return;\n        }\n\n        let userData = {\n            name: user.name,\n            surname: user.surname,\n            email: user.email,\n            password: user.password,\n            address: user.address,\n            phone: user.phone,\n            country: user.country,\n            city: user.city,\n            postal: user.postal,\n            role: user.role\n        };\n\n        let endpointUser = 'http://localhost:3002/users';\n\n        let response = setTimeout(async () => {\n            await axios.post(endpointUser, userData);\n        }, 1000)\n        if (response) {\n            alert('Usuario Registrado Con Exito');\n        } else {\n            alert('Lo siento , no se pudo completar el registro, vuelve a intentarlo mas tarde');\n        }\n    };\n\n    return (\n        <div className='content-sesion'>\n            \n            <div className='register'>\n                <h3>Registro</h3>\n             <div className='register-first'>\n                <div className=\"form-content-inputs-register\">\n                <p className='form-label-name'>Nombre</p>\n                <input name='name' className=\"form-input-register-name\" onChange={handleState}></input>\n\n                <p className='form-label-surname'>Apellidos</p>\n                <input name='surname' className=\"form-input-surname\" onChange={handleState}></input>\n\n                <div className=\"phone\">\n                     <p className='form-label-phone'>Teléfono de contacto</p>\n                    <input name=\"phone\" className=\"form-input-phone\" onChange={handleState}></input>\n             </div>\n\n                <p className='form-label-adress'>Direccíon</p>\n                <input name='address' className=\"form-input-adress\" onChange={handleState}></input>\n                </div>\n                \n                \n                \n                    <div className=\"city-country\">\n                        <p className='form-label-country'>Pais</p>\n                        <input name=\"country\" className=\"form-input-country\" onChange={handleState}></input>\n                    </div>\n                    </div>\n                    <div className='register-second'>\n                    <div className=\"city-city\">\n                        <p className='form-label-city'>Ciudad</p>\n                        <input name=\"city\" className=\"form-input-city\" onChange={handleState}></input>\n                    </div>\n                    <div className=\"city-cp\">\n                        <p className='form-label-cp'>CP</p>\n                        <input name=\"postal\" className=\"form-input-cp\" onChange={handleState}></input>\n                        \n                    </div>\n                \n                <p className='form-label-email'>Email</p>\n                <input name='email' className=\"form-input-email\" onChange={handleState}></input>\n                <div className=\"form-password-register\">\n                    <p className='form-label-password' >Contraseña</p>\n                    <input type='password' name='password' className=\"form-input-password\" onChange={handleState}></input>\n                </div>\n\n                <div className='message'>{registerMessage}</div>\n                <button onClick={ sendDataRegister } className=\"form-button form-button-register\">\n                    Registrarse\n                </button>\n               \n                </div>\n            \n            </div>\n            <div className='login'>\n            <p className='form-label-login-email'>Email</p>\n                <input name='email' className=\"form-label-login-email\" onChange={handler}></input>\n                <div className=\"form-password-login\">\n                    <p className='form-label-password-login' >Contraseña</p>\n                   \n                </div>\n                <input type='password' name='password' className=\"form-input-password\" onChange={handler}></input>\n                <div className='message'>{loginMessage}</div>\n            <button onClick= { sendDataLogin } className=\"form-button-login\">\n                    Login\n                </button>\n            </div>\n            \n        </div>\n    )\n}\n\n\n\nexport default connect()(Sesion);"]},"metadata":{},"sourceType":"module"}